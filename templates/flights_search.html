{% extends "base.html" %}
{% block content %}

<h2>Search Flights</h2>

<!-- =========================
     Search form
========================= -->
<form method="post">
    <label>
        Departure date:
        <input type="date" name="departure_date">
    </label>

    <br><br>

    <label>
        From:
        <select name="source">
            <option value="">-- Any --</option>
            {% for s in sources %}
                <option value="{{ s }}">{{ s }}</option>
            {% endfor %}
        </select>
    </label>

    <br><br>

    <label>
        To:
        <select name="dest">
            <option value="">-- Any --</option>
            {% for d in dests %}
                <option value="{{ d }}">{{ d }}</option>
            {% endfor %}
        </select>
    </label>

    <br><br>

    <button type="submit">Search</button>
</form>

<hr>

<!-- =========================
     Results table
========================= -->
{% if results %}
    <h3>Available Flights</h3>

    <table border="1" cellpadding="6">
        <tr>
            <th>Flight</th>
            <th>From</th>
            <th>To</th>
            <th>Departure</th>
            <th>Arrival</th>
            <th>Action</th>
        </tr>

        {% for r in results %}
        <tr>
            <td>{{ r.FlightNum }}</td>
            <td>{{ r.SourceAirport }}</td>
            <td>{{ r.DestAirport }}</td>
            <td>{{ r.DepartureDate }} {{ r.DepartureTime }}</td>
            <td>{{ r.ArrivalDateTime }}</td>
            <td>
                <a href="{{ url_for('book_flight', flight_num=r.FlightNum) }}">
                    Book
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>

{% elif results is not none %}
    <p>No flights found.</p>
{% endif %}

{% endblock %}
